<view class="container">
  <view class="page-title">ç”Ÿæˆå†å²</view>
  
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  
  <view class="empty" wx:if="{{!loading && historyList.length === 0}}">
    <view class="empty-icon">ğŸ“‹</view>
    <view class="empty-text">æš‚æ— ç”Ÿæˆè®°å½•</view>
    <button class="btn btn-primary" bindtap="navigateToUpload">å»ä¸Šä¼ </button>
  </view>
  
  <view class="history-list" wx:if="{{!loading && historyList.length > 0}}">
    <view class="history-item" wx:for="{{historyList}}" wx:key="item.id">
      <view class="history-header">
        <view class="history-type">
          <view class="type-tag" wx:if="{{item.layer_type === 'sector'}}">åŸºç«™æ‰‡åŒºå›¾å±‚</view>
          <view class="type-tag rsrp-tag" wx:elif="{{item.layer_type === 'rsrp'}}">RSRPç‚¹å›¾å±‚</view>
          <view class="type-tag facility-tag" wx:else>å…‰äº¤/æœºæˆ¿å›¾å±‚</view>
        </view>
        <view class="history-status">{{item.status === 'success' ? 'æˆåŠŸ' : 'å¤±è´¥'}}</view>
      </view>
      <view class="history-content">
        <view class="file-info">
          <view class="file-label">æ–‡ä»¶åï¼š</view>
          <view class="file-name">{{item.file_name}}</view>
        </view>
        <view class="history-time">{{formatTime(item.created_at)}}</view>
      </view>
      <view class="history-actions">
        <button class="action-btn download-btn" bindtap="downloadKML" data-filename="{{item.kml_url}}">
          ä¸‹è½½KML
        </button>
      </view>
    </view>
  </view>
</view>
